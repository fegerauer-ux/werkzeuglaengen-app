<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Werkzeuglängen Rechner – v0.1</title>
  <style>
    :root{
      --bg:#0b0d10; --panel:#12161b; --muted:#96a1b2; --text:#e9eef5; --accent:#6ee7ff; --accent2:#9bffd1; --warn:#ffcc66; --err:#ff6b6b;
      --radius:16px; --gap:14px; --shadow:0 6px 24px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; background:var(--bg); color:var(--text);}
    .wrap{max-width:820px; margin:0 auto; padding:20px;}
    header{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:16px}
    h1{font-size:1.25rem; margin:0}
    .badge{font-size:.8rem; color:var(--bg); background:linear-gradient(90deg,var(--accent),var(--accent2)); padding:4px 10px; border-radius:999px;}
    .grid{display:grid; grid-template-columns:1fr; gap:var(--gap)}
    @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:linear-gradient(180deg,#141a21,#0f1318); border:1px solid #1f2630; border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
    .row{display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; margin:10px 0}
    label{font-size:.95rem; color:#d2dae6}
    input[type="number"], input[type="text"]{width:120px; padding:8px 10px; border-radius:10px; background:#0d1116; color:var(--text); border:1px solid #222a35}
    input[type="range"]{width:100%}
    .unit{opacity:.75; font-size:.9rem}
    .sub{font-size:.86rem; color:var(--muted)}
    .out{display:flex; gap:12px; align-items:baseline; flex-wrap:wrap}
    .out strong{font-size:1.6rem}
    .chip{border:1px solid #273142; border-radius:999px; padding:6px 10px; font-size:.85rem; color:#c7d2e3}
    .ok{color:var(--accent2)}
    .warn{color:var(--warn)}
    .err{color:var(--err)}
    .muted{color:var(--muted)}
    .spread{display:flex; justify-content:space-between; align-items:center; gap:10px}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.85rem; background:#0b1016; padding:2px 6px; border-radius:6px; border:1px solid #202736}
    .footer{margin-top:16px; font-size:.85rem; color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Werkzeuglängen Rechner</h1>
      <span class="badge">v0.1</span>
    </header>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card" aria-labelledby="inputsTitle">
        <h2 id="inputsTitle" style="margin:0 0 8px 0; font-size:1.1rem;">Eingaben</h2>
        <p class="sub">Maschine & Vorgang. Werte live verknüpft.</p>

        <div class="row">
          <label for="C">Freiraum <span class="muted">C</span></label>
          <div class="spread">
            <input id="C" type="number" inputmode="decimal" min="1" max="200" step="1" value="60"> <span class="unit">mm</span>
          </div>
        </div>
        <div class="row">
          <label for="hub">Hub Z <span class="muted">(Hub)</span></label>
          <div class="spread">
            <input id="hub" type="number" min="0" max="200" step="1" value="20"> <span class="unit">mm</span>
          </div>
        </div>
        <hr style="border:none; border-top:1px solid #1e2631; margin:10px 0">
        <div class="row">
          <label for="H">Werkstückhöhe <span class="muted">H</span></label>
          <div class="spread" style="flex:1 1 auto; gap:10px">
            <input id="H" type="range" min="0" max="60" step="1" value="35" style="flex:1"> 
            <input id="Hn" type="number" min="0" max="200" step="1" value="35" style="width:90px">
            <span class="unit">mm</span>
          </div>
        </div>
        <div class="row">
          <label for="hf">Freifahrhöhe <span class="muted">h<sub>f</sub></span></label>
          <div class="spread" style="flex:1 1 auto; gap:10px">
            <input id="hf" type="range" min="0" max="20" step="1" value="5" style="flex:1">
            <input id="hfn" type="number" min="0" max="100" step="1" value="5" style="width:90px">
            <span class="unit">mm</span>
          </div>
        </div>
        <div class="row">
          <label for="d">Frästiefe <span class="muted">d</span></label>
          <div class="spread" style="flex:1 1 auto; gap:10px">
            <input id="d" type="range" min="0" max="20" step="1" value="2" style="flex:1">
            <input id="dn" type="number" min="0" max="100" step="1" value="2" style="width:90px">
            <span class="unit">mm</span>
          </div>
        </div>
      </section>

      <!-- OUTPUTS -->
      <section class="card" aria-labelledby="outTitle">
        <h2 id="outTitle" style="margin:0 0 8px 0; font-size:1.1rem;">Ergebnisse</h2>
        <div class="out" style="margin-bottom:10px">
          <div>
            <div class="muted">L<sub>max</sub></div>
            <strong id="Lmax">–</strong> <span class="unit">mm</span>
          </div>
          <div>
            <div class="muted">L<sub>min</sub></div>
            <strong id="Lmin">–</strong> <span class="unit">mm</span>
          </div>
        </div>
        <div class="chip" id="rangeChip">Werkzeug: – bis – mm</div>
        <div id="notes" class="sub" style="margin-top:10px"></div>
        <hr style="border:none; border-top:1px solid #1e2631; margin:12px 0">
        <div class="sub">Formeln: L<sub>max</sub> = C − H − h<sub>f</sub>  •  L<sub>min</sub> = max(0, C − Hub − H + d)</div>
      </section>
    </div>

    <section class="card" style="margin-top:14px" aria-labelledby="detailsTitle">
      <h3 id="detailsTitle" style="margin:0 0 8px 0; font-size:1rem;">Hinweise</h3>
      <ul class="sub" style="margin:0 0 4px 18px; line-height:1.35">
        <li>Eingaben in mm. Schieberegler und Zahlenfeld sind gekoppelt.</li>
        <li>Wenn L<sub>min</sub> &gt; L<sub>max</sub>, ist die Kombination <em>nicht</em> fahrbar (Kollision oder zu langes Werkzeug).</li>
        <li>Du kannst C/Hub an deine Maschine anpassen.</li>
      </ul>
      <div class="footer">Made for mobile • v0.1</div>
    </section>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const C = $("C"), hub = $("hub");
    const H = $("H"), Hn = $("Hn");
    const hf = $("hf"), hfn = $("hfn");
    const d = $("d"), dn = $("dn");
    const Lmax = $("Lmax"), Lmin = $("Lmin"), notes = $("notes"), rangeChip = $("rangeChip");

    function clamp(v, lo, hi){ return Math.max(lo, Math.min(hi, v)); }

    function recalc(){
      const Cv = +C.value || 0;
      const Hubv = +hub.value || 0;
      const Hv = clamp(+Hn.value || +H.value || 0, 0, 1000);
      const hfv = clamp(+hfn.value || +hf.value || 0, 0, 1000);
      const dv = clamp(+dn.value || +d.value || 0, 0, 1000);

      H.value = Hv; Hn.value = Hv;
      hf.value = hfv; hfn.value = hfv;
      d.value = dv; dn.value = dv;

      let Lmaxv = (Cv - Hv - hfv);
      let Lminv = Math.max(0, (Cv - Hubv - Hv + dv));

      const fmt = v => (isFinite(v) ? v.toFixed(1).replace(/\.0$/, "") : "–");
      Lmax.textContent = fmt(Lmaxv);
      Lmin.textContent = fmt(Lminv);
      rangeChip.textContent = `Werkzeug: ${fmt(Lminv)} – ${fmt(Lmaxv)} mm`;

      let msg = [];
      if (Lmaxv < 0) msg.push("⚠︎ Lmax &lt; 0 → kein Freiraum");
      if (Lminv > Lmaxv) msg.push("❌ Lmin &gt; Lmax → nicht fahrbar");
      if (msg.length === 0) msg.push("✅ Kombination fahrbar");
      notes.innerHTML = msg.join(" &nbsp;•&nbsp; ");

      // Chip color
      rangeChip.classList.remove("ok","warn","err");
      if (Lminv > Lmaxv) rangeChip.classList.add("err");
      else if (Lminv < 0 || Lmaxv < 0) rangeChip.classList.add("warn");
      else rangeChip.classList.add("ok");
    }

    // events
    [C, hub, H, Hn, hf, hfn, d, dn].forEach(el => el.addEventListener('input', recalc));
    recalc();
  </script>
</body>
</html>
